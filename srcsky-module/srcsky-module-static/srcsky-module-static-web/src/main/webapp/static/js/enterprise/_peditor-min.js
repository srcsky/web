KISSY.add("enterprise/_peditor",function(j){var a,c,g,l,m,n;function o(h,b){a.style.background="#696969";a.style.opacity=0.8;a.style.filter="alpha(opacity=80)";if(l&&m||n){var f=0,p=0;0!==document.documentElement.clientWidth?(f=document.documentElement.clientWidth,p=document.documentElement.clientHeight):(f=document.body.clientWidth,p=document.body.clientHeight);a.style.position="absolute";a.style.width=f+"px";a.style.height=p+"px";a.style.setExpression("top","(t=document.documentElement.scrollTop||document.body.scrollTop)+'px'");
a.style.setExpression("left","(l=document.documentElement.scrollLeft||document.body.scrollLeft)+'px'")}else a.style.width="100%",a.style.height="100%",a.style.top="0",a.style.left="0",a.style.position="fixed";a.style.zIndex=99998;c.style.border="1px solid #2c2c2c";l&&m||n?(c.style.position="absolute",c.style.setExpression("top","25+((t=document.documentElement.scrollTop||document.body.scrollTop))+'px'"),c.style.setExpression("left","35+((l=document.documentElement.scrollLeft||document.body.scrollLeft))+'px'")):
(c.style.position="fixed",c.style.top="25px",c.style.left="35px");c.style.zIndex=99999;b&&(document.body.appendChild(a),document.body.appendChild(c));g.style.width=a.offsetWidth-70+"px";g.style.height=a.offsetHeight-50+"px";g.style.border="1px solid #b1b1b1";g.style.backgroundColor="#606060";g.style.display="block";g.frameBorder=0}function r(h,b){for(var a in b)b.hasOwnProperty(a)&&(h[a]=b[a]||h[a]);return h}function q(a){var b=j.getPath("/enterprise/thirdparty/photo/Express.swf?_="+(new Date).getTime()),
f;for(f in a)a.hasOwnProperty(f)&&("close"!=f&&"complete"!=f)&&(b+="&"+f+"="+escape(a[f]));return b}function s(a){for(var b=["width","100%","height","100%","src",q(a),"movie",q(a),"quality","high","wmode","window","devicefont","false","id","peditor","bgcolor","#606060","name","editor","menu","false","allowFullScreen","true","allowScriptAccess","always","allowFullScreenInteractive","true"],a={},f={},c={},d=0;d<b.length;d+=2)switch(b[d].toLowerCase()){case "src":case "movie":a.src=b[d+1];f.movie=b[d+
1];break;case "id":c[b[d]]=b[d+1];a[b[d]]=c[b[d]]=b[d+1];break;case "width":case "height":case "name":case "tabindex":a[b[d]]=c[b[d]]=b[d+1];break;default:a[b[d]]=f[b[d]]=b[d+1]}c.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";a.type="application/x-shockwave-flash";var b=-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,d=-1!=navigator.appVersion.toLowerCase().indexOf("win")?!0:!1,g=-1!=navigator.userAgent.indexOf("Opera")?!0:!1,e="";if(b&&d&&!g){var e=e+"<object ",i;for(i in c)e+=i+'="'+c[i]+
'" ';e+=">";for(i in f)e+='<param name="'+i+'" value="'+f[i]+'"/>';e+="</object>"}else{e+="<embed ";for(i in a)e+=i+'="'+a[i]+'" ';e+=" />"}return e}var k=0;window.peditor_settings={};a:if(null!=navigator.plugins&&0<navigator.plugins.length&&navigator.plugins["Shockwave Flash"])k=navigator.plugins["Shockwave Flash"].description.split(" ")[2].split(".")[0];else{try{k=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version").split(" ")[1].split(",")[0];break a}catch(t){}k=void 0}n=
(l=window.ActiveXObject)&&null!==document.implementation&&null!==document.implementation.hasFeature&&null===window.XMLHttpRequest;m="BackCompat"===document.compatMode;g=c=a=void 0;return j.Peditor={init:function(h){10>k?alert("Flash Player \u7248\u672c\u4f4e\u4e8e10\uff0c\u5c06\u65e0\u6cd5\u4f7f\u7528\u622a\u56fe\u529f\u80fd\uff01"):(h=r({target:"http://www.haoyuduo.com/system/fileuploader",close:j.Peditor.destroy,complete:function(){j.Peditor.destroy()},resource_path:j.getPath("/enterprise/thirdparty/photo"),
close_function:"window.peditor_close",complete_function:"window.peditor_complete",quality:100,crop_size:"80x80"},h||{}),window.peditor_close=h.close,window.peditor_complete=h.complete,g=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),o(!1,!0),g.innerHTML=s(h),c.appendChild(g),j.Event.on(window,"resize",o))},destroy:function(){j.DOM.remove("#peditor");c.removeChild(g);document.body.removeChild(a);document.body.removeChild(c);j.Event.on(window,"resize",
o)}}},{requires:["event"]});
