KISSY.add("enterprise/_helper",function(d,e){function i(a,b){var g=parseInt(a/86400,10),c=parseInt(a/3600%24,10),f=parseInt(a/60%60,10),j=parseInt(a%60,10),h=["\u6d3b\u52a8\u5269\u4f59\u65f6\u95f4\uff1a"];0!=g&&h.push("<span>"+g+"</span>\u5929");h.push("<span>"+c+"</span>\u5c0f\u65f6");h.push("<span>"+f+"</span>\u5206");h.push("<span>"+j+"</span>\u79d2");e.html(b,h.join(""));0<a&&(a--,d.later(function(){i(a,b)},1E3))}var c={_const:{YES:1,NO:2,STATUS_PROCCESS_INIT:1,STATUS_PROCCESS_IN:2,STATUS_PROCCESS_SUCCESS:3,
STATUS_PROCCESS_FAIL:4,STATIC_LOCAL_URL:d.getPath().replace("js/","fileuploader"),STATIC_REMOTE_URL:"http://img.mlpui.com/static/fileuploader"},emptyObj:{},reload:function(){window.location.reload()},redirect:function(a){window.location.href=a;return!1},_generateDirectory:function(a){a=Number(a);return Math.floor(a/1073741824)+"/"+Math.floor(a/1048576)+"/"+Math.floor(a/1024)+"/"},fileuploader:function(a,b){return"object"==typeof a?a.s==c._const.STATUS_PROCCESS_SUCCESS?c._const.STATIC_REMOTE_URL+"/img/"+
c._generateDirectory(a.id)+a.id+(!b||""==b?"":"!"+b):c._const.STATIC_LOCAL_URL+"/"+c._generateDirectory(a.id)+a.id+(!b||""==b?"":"!"+b):c._const.STATIC_LOCAL_URL+"/"+a+(!b||""==b?"":"!"+b)},decimal:function(a){a=parseFloat(a);if(isNaN(a))return!1;a=Math.round(100*a,1)/100;return a.toFixed(1)},greeting:function(){var a=(new Date).getHours();return 6>a?"\u51cc\u6668\u597d\uff01":9>a?"\u65e9\u4e0a\u597d\uff01":12>a?"\u4e0a\u5348\u597d\uff01":14>a?"\u4e2d\u5348\u597d\uff01":17>a?"\u4e0b\u5348\u597d\uff01":
19>a?"\u508d\u665a\u597d\uff01":22>a?"\u665a\u4e0a\u597d\uff01":"\u591c\u91cc\u597d\uff01"},isDebug:function(){return-1!=location.toString().indexOf("debug")},user:{info:{id:0,username:"\u7f51\u53cb"},login:!1,init:function(){var a=d.isEmpty(/web_session_member_key_id=(\d+)/.exec(document.cookie))?0:/web_session_member_key_id=(\d+)/.exec(document.cookie)[1],b=d.isEmpty(/web_session_member_key_username=([^;]+)/.exec(document.cookie))?"":/web_session_member_key_username=([^;]+)/.exec(document.cookie)[1];
this.info.id=d.isEmpty(a,"0")?0:a;this.info.username=decodeURIComponent(d.isEmpty(b)?"":b);this.login=!d.isEmpty(a,"0")}}};c.user.init();c.merchant={info:{id:0},login:!1,init:function(){var a=d.isEmpty(/web_session_merchant_key_id=(\d+)/.exec(document.cookie))?0:/web_session_merchant_key_id=(\d+)/.exec(document.cookie)[1];this.info.id=d.isEmpty(a,"0")?0:a;this.login=!d.isEmpty(a,"0")}};c.merchant.init();c.input=function(a){var b=[];d.each(a,function(a){/select|textarea|input/i.test(a.nodeName)?b.push(a):
b.push.apply(b,e.query("select,textarea,input",a))});return d.filter(b,function(a){return a.name&&!a.disabled&&(a.checked||/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i.test(a.type)||/select|textarea/i.test(a.nodeName))},a)};c.serialize=function(a){var b={};d.each(a,function(a){var c=e.val(a),f,c=d.isArray(c)?d.map(c,function(a){return a.replace(/\r?\n/g,"\r\n")}):c.replace(/\r?\n/g,"\r\n");b.hasOwnProperty(a.name)?(f=b[a.name],d.isArray(f)||(f=
b[a.name]=[f]),f.push.apply(f,d.makeArray(c))):b[a.name]=c});return b};c.flicker=function(a,b){var g=d.merge({count:4,time:0.3},b);d.each(a,function(a){var b=e.get(a);d.use("anim",function(a,d){d.stop(b,!1,!0);e.css(b,{opacity:1});e.show(b);a.later(function(){for(var a={duration:g.time,queue:"_flicker_",easing:"easeOutStrong"},e=0;e<g.count;e++)c.flicker._anim=(new d(b,{opacity:e%2},a)).run()},300)})})};c.countdown=function(a){e.hasAttr(a,"diff")&&i(e.attr(a,"diff"),a)};c.date={replace:function(a,
b,c){return a.split(b).join(c)},getFullMonth:function(a){a=a.getMonth()+1;return 9<a?a.toString():"0"+a},getFullDate:function(a){a=a.getDate();return 9<a?a.toString():"0"+a},getHarfYear:function(a){a=a.getYear();return 9<a?a.toString():"0"+a},addDays:function(a,b){a.setDate(a.getDate()+b);return a},addMonths:function(a,b){var c=new Date(a.getTime());c.setMonth(c.getMonth()+b);return c},addYears:function(a,b){a.setFullYear(a.getFullYear()+b);return a},format:function(a,b){b=this.replace(b,"yyyy",a.getFullYear());
b=this.replace(b,"MM",this.getFullMonth(a));b=this.replace(b,"dd",this.getFullDate(a));b=this.replace(b,"yy",this.getHarfYear(a));b=this.replace(b,"M",a.getMonth()+1);return b=this.replace(b,"d",a.getDate())},convert:function(a){var a=(a+"").replace(/^\s*/g,"").replace(/\s*$/g,""),b;if(/^[0-9]{8}$/.test(a)&&(b=new Date(new Number(a.substr(0,4)),new Number(a.substr(4,2))-1,new Number(a.substr(6,2))),b.getTime()))return b;b=new Date(a);if(b.getTime())return b;b=new Date(this.replace(a,"-","/"));return b.getTime()?
b:null}};return d.Helper=c},{requires:["dom","event"]});
