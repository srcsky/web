KISSY.add("enterprise/_xiuxiu",function(b){function e(a,c){void 0==window.xiuxiu?(d("body").append(b.substitute("<div id='{id}_container' style='display:none;background:{background};width:{width}px;height:{height}px'><div id='{id}'></div></div>",a)),b.getScript("http://open.web.meitu.com/sources/xiuxiu.js",{success:function(){xiuxiu.single=!0;xiuxiu._apiTrack=b.noop;xiuxiu.params.bgcolor=a.background;xiuxiu.embedSWF(a.id,3,"100%","100%");xiuxiu.setUploadURL(a.url,a.id);xiuxiu.setUploadType(2,a.id);
xiuxiu.setUploadDataFieldName("fileuploader",a.id);c()}})):(d("#"+a.id+"_container").append(b.substitute("<div id='{id}'></div>",a)),xiuxiu.params.bgcolor=a.background,xiuxiu.embedSWF(a.id,3,"100%","100%"),xiuxiu.setUploadURL(a.url,a.id),xiuxiu.setUploadType(2,a.id),xiuxiu.setUploadDataFieldName("fileuploader",a.id),c())}var d=b.all;return b.Xiuxiu={init:function(a){var c=b.merge({id:"enterprise_xiuxiu_container",width:900,height:500,background:"#eceeef",image:"http://open.web.meitu.com/sources/images/1.jpg",
url:b.substitute("http://{host}/system/fileuploader",{host:location.hostname}),background:"#eceeef",success:b.noop},a);e(c,function(){b.Xiuxiu.dialog=b.Window.dialog_box({close:function(){swfobject.removeSWF(xiuxiu.defaultID)},content:document.getElementById(c.id+"_container"),width:c.width,height:c.height,padding:"0",cancel:!0,cancelVal:"\u5173\u95ed",resize:!1,init:function(){d(this.DOM.content[0]).css({width:c.width,height:c.height,background:c.background});xiuxiu.onInit=function(){b.later(function(){xiuxiu.loadPhoto(c.image)},
300)};xiuxiu.onUploadResponse=function(a){a=eval("("+a+")").input;b.bind(c.success,{close:function(){b.Xiuxiu.dialog.close()}})(a)}}})})}}},{requires:["node","enterprise/_window"]});
