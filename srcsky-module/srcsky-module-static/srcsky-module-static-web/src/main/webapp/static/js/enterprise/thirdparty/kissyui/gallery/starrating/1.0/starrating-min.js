KISSY.add("gallery/starrating/1.0/starrating",function(b){function d(a){d.superclass.constructor.apply(this,arguments);this._init()}d.ATTRS={container:{setter:function(a){return b.isString(a)?b.one(a):a.offset?a:new b.Node(a)}},reason:{value:[]},level:{value:[]},tipsCls:{value:"rating-tips"},itemCls:{value:"shop-rating"},popCls:{value:"rating-pop-tip"},currentCls:{value:"current-rating"},resultCls:{value:"result"},valueName:{value:"data-star-value"}};b.extend(d,b.Base,{_init:function(){var a=this,
g=a.get("container");if(g){var e=a.get("reason"),d=a.get("level"),k=a.get("currentCls");g.all("."+a.get("itemCls")).each(function(i,c){e[c]||(e[c]=[]);i.all("a").each(function(f,h){e[c][h]=e[c][h]||"";d[h]=d[h]||"";var j=f.attr(a.get("valueName")),l=e[c][h];f.on("click",function(b){b.halt();i.all("."+k).removeClass(k);f.addClass(k);g.all("."+a.get("tipsCls")).hide();i.one("input").val(j);i.one("."+a.get("resultCls")).html('<span style="padding-left: 20px;"><em>'+j+"</em> \u661f</span> - <strong>"+
l+"</strong>");b._continue||a.fire("rating",{idx:c,score:j})}).on("mouseenter",function(c){var c=new b.Node(c.currentTarget),e=c.offset(),f=g.offset();g.all("."+a.get("popCls")).html("<span><em>"+j+"</em> \u661f "+d[h]+"</span><strong>"+l+"</strong>").css({left:e.left+c.width()-f.left-100+"px",top:e.top-f.top+c.height()+"px"}).show()}).on("mouseleave",function(){g.all("."+a.get("popCls")).hide()});try{6===b.UA.ie&&f.parent().addClass(f.attr("class").split()[0])}catch(m){}})})}}});b.namespace("Gallery");
b.Gallery.StarRating=d;return b.StarRating},{requires:["dom","base","node"]});
